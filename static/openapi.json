{
  "info": {
    "title": "AI Chatbot API",
    "version": "1.0.0"
  },
  "tags": [
    {
      "name": "Auth"
    },
    {
      "name": "Todoist"
    },
    {
      "name": "Calendar"
    },
    {
      "name": "System"
    },
    {
      "name": "Memory"
    },
    {
      "name": "Settings"
    },
    {
      "name": "Conversations"
    },
    {
      "name": "Planner"
    },
    {
      "name": "Agents"
    },
    {
      "name": "Chat"
    },
    {
      "name": "Files"
    },
    {
      "name": "Costs"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful response"
          }
        },
        "summary": "Index"
      }
    },
    "/auth/me": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserContainerResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Auth"
        ],
        "summary": "Get current user info."
      }
    },
    "/api/ready": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadinessResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "503": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Service Unavailable"
          }
        },
        "tags": [
          "System"
        ],
        "summary": "Readiness probe - checks if the application can serve traffic.",
        "description": "Verifies that all dependencies (database) are accessible.\nUse this for load balancer health checks that should remove\nunhealthy instances from the pool.\n\nReturns:\n200: Application is ready to serve traffic\n503: Application is not ready (dependency failure)"
      }
    },
    "/api/models": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModelsListResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "System"
        ],
        "summary": "List available models."
      }
    },
    "/api/health": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "System"
        ],
        "summary": "Liveness probe - checks if the application process is running.",
        "description": "This endpoint should NOT check external dependencies (database, APIs).\nIt only verifies the Flask application is responding to requests.\n\nUse /api/ready for readiness checks that verify dependencies.\n\nReturns:\n200: Application is alive and responding"
      }
    },
    "/api/search": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResultsResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Search across all conversations and messages.",
        "description": "Uses full-text search with BM25 ranking. Searches both conversation\ntitles and message content. Results are ordered by relevance.\n\nQuery parameters:\n- q: Search query (required, 1-200 characters)\n- limit: Number of results to return (default: 20, max: 50)\n- offset: Number of results to skip for pagination (default: 0)\n\nReturns:\n- results: Array of search results with conversation info and message snippets\n- total: Total number of matching results\n- query: The search query that was executed"
      }
    },
    "/api/agents": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentsListResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "List all autonomous agents for the current user.",
        "description": "Returns agents ordered by creation date (newest first).\nEach agent includes unread_count and has_pending_approval flags."
      },
      "post": {
        "parameters": [],
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            },
            "description": "Validation error"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Create a new autonomous agent.",
        "description": "Creates the agent and its dedicated conversation automatically.\nThe conversation title will be \"Agent: <name>\".\n\nReturns the created agent with its conversation_id.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAgentRequest"
              }
            }
          }
        }
      }
    },
    "/auth/google": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Forbidden"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Auth"
        ],
        "summary": "Authenticate with Google ID token from Sign In with Google."
      }
    },
    "/api/version": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "System"
        ],
        "summary": "Get current app version (JS bundle hash).",
        "description": "This endpoint does not require authentication so version can be\nchecked even before login. Used by frontend to detect when a new\nversion is deployed and prompt users to reload."
      }
    },
    "/api/planner": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlannerDashboardResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Planner"
        ],
        "summary": "Get planner dashboard data for the next 7 days.",
        "description": "Returns events from Google Calendar and tasks from Todoist,\norganized by day. Requires at least one integration to be connected.\n\nThe dashboard includes:\n- days: Array of 7 days (Today, Tomorrow, then weekday names)\n- Each day contains events and tasks for that date\n- overdue_tasks: Tasks that are past their due date\n- Connection status flags for both integrations\n- server_time: Current server time for cache invalidation\n\nQuery parameters:\n- force_refresh: Set to \"true\" to bypass cache and fetch fresh data"
      }
    },
    "/{path}": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          }
        },
        "summary": "Static Files"
      }
    },
    "/auth/refresh": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenRefreshResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Auth"
        ],
        "summary": "Refresh the JWT token.",
        "description": "Returns a new token with extended expiration.\nThe old token remains valid until its original expiration."
      }
    },
    "/api/memories": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoriesListResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Memory"
        ],
        "summary": "List all memories for the current user."
      }
    },
    "/auth/client-id": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClientIdResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Auth"
        ],
        "summary": "Return Google Client ID for frontend initialization."
      }
    },
    "/api/planner/sync": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlannerSyncResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Planner"
        ],
        "summary": "Get planner conversation state for sync.",
        "description": "Returns the planner conversation state for real-time synchronization.\nThis allows the frontend to detect:\n- New messages added in another tab/device\n- Planner reset in another tab\n- Planner deletion\n\nReturns:\n- conversation: Planner conversation state (id, updated_at, message_count, last_reset)\nor null if no planner exists\n- server_time: Server timestamp for clock-skew-proof comparisons"
      }
    },
    "/api/config/upload": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadConfigResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "System"
        ],
        "summary": "Get file upload configuration for frontend."
      }
    },
    "/api/conversations": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationsListPaginatedResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "List conversations for the current user with pagination.",
        "description": "Query parameters:\n- limit: Number of conversations to return (default: 30, max: 100)\n- cursor: Cursor from previous page for fetching next page\n\nReturns paginated conversations with message_count for proper sync initialization."
      },
      "post": {
        "parameters": [],
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Create a new conversation."
      }
    },
    "/api/planner/reset": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlannerResetResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Planner"
        ],
        "summary": "Manually reset the planner conversation.",
        "description": "Physically deletes all messages from the planner conversation\n(not soft delete). Message costs are preserved for accurate\ncost tracking.\n\nThis also clears the dashboard cache so the next request fetches\nfresh data.\n\nReturns:\n- success: True if reset was successful\n- message: Human-readable status message"
      }
    },
    "/auth/todoist/status": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TodoistStatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Todoist"
        ],
        "summary": "Get current Todoist connection status.",
        "description": "Returns whether Todoist is connected, and if so, the connected email.\nAlso detects invalid tokens and reports needs_reconnect=True."
      }
    },
    "/auth/todoist/connect": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TodoistConnectResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Todoist"
        ],
        "summary": "Connect Todoist account by exchanging OAuth code for access token.",
        "description": "The frontend should:\n1. Call GET /auth/todoist/auth-url to get the authorization URL and state\n2. Redirect user to the authorization URL\n3. After user authorizes, Todoist redirects back with code and state\n4. Frontend validates state matches, then calls this endpoint with code"
      }
    },
    "/auth/calendar/status": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoogleCalendarStatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Return Google Calendar connection status."
      }
    },
    "/api/agents/approvals": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PendingApprovalsResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Get all pending approval requests.",
        "description": "Returns pending approvals with agent names for display."
      }
    },
    "/auth/todoist/auth-url": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TodoistAuthUrlResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Todoist"
        ],
        "summary": "Get Todoist OAuth authorization URL.",
        "description": "Returns a URL to redirect the user to for Todoist authorization.\nThe state token should be stored and validated on callback."
      }
    },
    "/auth/calendar/connect": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoogleCalendarConnectResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Connect Google Calendar via OAuth."
      }
    },
    "/api/users/me/settings": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserSettingsResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Settings"
        ],
        "summary": "Get user settings including custom instructions and WhatsApp phone."
      },
      "patch": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Settings"
        ],
        "summary": "Update user settings."
      }
    },
    "/api/agents/{agent_id}": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Get a specific agent by ID.",
        "description": "Returns the agent with unread_count and has_pending_approval flags."
      },
      "patch": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            },
            "description": "Validation error"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Update an agent's configuration.",
        "description": "Only provided fields will be updated; others remain unchanged.\nIf the name changes, the conversation title is updated to match.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAgentRequest"
              }
            }
          }
        }
      },
      "delete": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Delete an agent and its dedicated conversation.",
        "description": "Also deletes:\n- All messages in the agent's conversation\n- All approval requests for this agent\n- All execution records for this agent\n\nMessage costs are preserved for accurate cost tracking."
      }
    },
    "/auth/calendar/auth-url": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoogleCalendarAuthUrlResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Return the Google Calendar OAuth URL."
      }
    },
    "/api/conversations/sync": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SyncResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Sync conversations - returns conversations updated since a given timestamp.",
        "description": "Query parameters:\n- since: ISO timestamp to get conversations updated after this time (optional)\n- full: If \"true\", returns all conversations for delete detection (optional)\n\nReturns:\n- conversations: List of conversation objects with message_count\n- server_time: Current server timestamp to use for next sync\n- is_full_sync: Whether this was a full sync (all conversations returned)"
      }
    },
    "/auth/todoist/disconnect": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Todoist"
        ],
        "summary": "Disconnect Todoist account.",
        "description": "Removes the stored access token. Note that the user must manually\nrevoke access in Todoist settings if they want to fully disconnect."
      }
    },
    "/auth/calendar/calendars": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CalendarListResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "List all available Google Calendars for the current user."
      }
    },
    "/auth/calendar/disconnect": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Disconnect Google Calendar tokens."
      }
    },
    "/api/memories/{memory_id}": {
      "delete": {
        "parameters": [
          {
            "in": "path",
            "name": "memory_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          }
        },
        "tags": [
          "Memory"
        ],
        "summary": "Delete a memory."
      }
    },
    "/api/planner/conversation": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlannerConversationResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Planner"
        ],
        "summary": "Get the planner conversation for the current user.",
        "description": "Creates a new planner conversation if one doesn't exist.\nAutomatically resets the conversation at 4am daily (lazy check).\n\nThe planner conversation is a single, special conversation per user:\n- Excluded from search results\n- Has ephemeral chat that resets daily\n- Appears at the top of the conversation list with special treatment\n\nReturns:\n- The planner conversation with its messages\n- was_reset: True if the conversation was auto-reset this request"
      }
    },
    "/api/messages/{message_id}": {
      "delete": {
        "parameters": [
          {
            "in": "path",
            "name": "message_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Delete a message.",
        "description": "Deletes a single message and its associated files/thumbnails.\nThe message must belong to a conversation owned by the authenticated user.\nCost data is intentionally preserved for accurate reporting."
      }
    },
    "/api/agents/{agent_id}/run": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TriggerAgentResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Manually trigger an agent to run.",
        "description": "Creates an execution record and runs the agent.\nIf the agent is disabled or waiting for approval, returns an error.\n\nReturns the execution record with status."
      }
    },
    "/api/agents/command-center": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommandCenterResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Get command center dashboard data.",
        "description": "Returns aggregated data for the agents command center:\n- agents: All agents with unread counts and pending status\n- pending_approvals: All pending approval requests\n- recent_executions: Recent execution history\n- total_unread: Total unread messages across all agents\n- agents_waiting: Number of agents blocked on approval"
      }
    },
    "/api/users/me/costs/monthly": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MonthlyCostResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          }
        },
        "tags": [
          "Costs"
        ],
        "summary": "Get cost for the current user in a specific month."
      }
    },
    "/api/users/me/costs/history": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CostHistoryResponse"
                }
              }
            },
            "description": "Successful response"
          }
        },
        "tags": [
          "Costs"
        ],
        "summary": "Get monthly cost history for the current user."
      }
    },
    "/api/conversations/{conv_id}": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationDetailPaginatedResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Get a conversation with its messages (paginated).",
        "description": "Query parameters for message pagination:\n- message_limit: Number of messages to return (default: 50, max: 200)\n- message_cursor: Cursor for fetching older/newer messages\n- direction: \"older\" (default) or \"newer\" for pagination direction\n\nBy default, returns the newest messages.\n\nOptimized: Only includes file metadata, not thumbnails or full file data.\nThumbnails are fetched on-demand via /api/messages/<message_id>/files/<file_index>/thumbnail.\nFull files can be fetched via /api/messages/<message_id>/files/<file_index>."
      },
      "patch": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Update a conversation (title, model)."
      },
      "delete": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Delete a conversation."
      }
    },
    "/api/ai-assist/parse-schedule": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ParseScheduleResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            },
            "description": "Validation error"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Parse natural language schedule description into cron expression.",
        "description": "Uses an LLM to convert user-friendly schedule descriptions\n(e.g., \"every weekday at 9am\") into standard cron expressions.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ParseScheduleRequest"
              }
            }
          }
        }
      }
    },
    "/api/ai-assist/enhance-prompt": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnhancePromptResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
                }
              }
            },
            "description": "Validation error"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Enhance an agent's system prompt using AI.",
        "description": "Takes the current prompt and agent context, then suggests\nimprovements for clarity, completeness, and effectiveness.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EnhancePromptRequest"
              }
            }
          }
        }
      }
    },
    "/api/messages/{message_id}/cost": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "message_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageCostResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          }
        },
        "tags": [
          "Costs"
        ],
        "summary": "Get cost for a specific message."
      }
    },
    "/auth/calendar/selected-calendars": {
      "get": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SelectedCalendarsResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Get the user's selected calendar IDs."
      },
      "put": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SelectedCalendarsResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "tags": [
          "Calendar"
        ],
        "summary": "Update the user's selected calendar IDs."
      }
    },
    "/api/agents/{agent_id}/executions": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentExecutionsListResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Get execution history for an agent.",
        "description": "Returns the 20 most recent executions, newest first."
      }
    },
    "/api/conversations/{conv_id}/cost": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationCostResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          }
        },
        "tags": [
          "Costs"
        ],
        "summary": "Get total cost for a conversation."
      }
    },
    "/api/agents/{agent_id}/mark-viewed": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Mark an agent's conversation as viewed.",
        "description": "Updates the last_viewed_at timestamp to reset unread count.\nShould be called when user opens the agent's conversation."
      }
    },
    "/api/agents/dev/evaluate-schedules": {
      "post": {
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "(Dev only) Evaluate and run scheduled agents.",
        "description": "This endpoint is for local development/testing without systemd timers.\nIt evaluates which agents are due to run based on their cron schedules\nand triggers them.\n\nOnly available in development mode (FLASK_ENV=development)."
      }
    },
    "/api/approvals/{approval_id}/reject": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "approval_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Reject a pending approval request.",
        "description": "Marks the request as rejected. The agent will not perform\nthe requested action. Adds a rejection message to the conversation."
      }
    },
    "/api/approvals/{approval_id}/approve": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "approval_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatusResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Approve a pending approval request.",
        "description": "Marks the request as approved and resumes the agent execution.\nThe agent will continue with a message indicating the action was approved."
      }
    },
    "/api/conversations/{conv_id}/messages": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessagesListResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Conversations"
        ],
        "summary": "Get paginated messages for a conversation.",
        "description": "This is a dedicated endpoint for fetching message pages, more efficient\nthan the full conversation endpoint when only messages are needed.\n\nQuery parameters:\n- limit: Number of messages to return (default: 50, max: 200)\n- cursor: Cursor for fetching older/newer messages\n- direction: \"older\" (default) or \"newer\" for pagination direction\n- around_message_id: Load messages around a specific message (for search navigation)\nWhen specified, cursor and direction are ignored.\n\nBy default, returns the newest messages."
      }
    },
    "/api/conversations/{conv_id}/chat/batch": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatBatchResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Bad Request"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Internal Server Error"
          }
        },
        "tags": [
          "Chat"
        ],
        "summary": "Send a message and get a complete response (non-streaming).",
        "description": "Accepts JSON body with:\n- message: str (optional if files present) - the text message\n- files: list[dict] (optional if message present) - array of {name, type, data} file objects\n- force_tools: list[str] (optional) - list of tool names to force (e.g. [\"web_search\"])"
      }
    },
    "/api/agents/{agent_id}/conversation/sync": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "agent_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentConversationSyncResponse"
                }
              }
            },
            "description": "Successful response"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "tags": [
          "Agents"
        ],
        "summary": "Sync agent conversation - returns message count and updated_at.",
        "description": "Used for real-time synchronization when viewing an agent's conversation.\nThis allows detection of external updates to the agent conversation.\n\nReturns:\n- conversation: Object with message_count and updated_at, or null if no conversation\n- server_time: Current server timestamp to use for next sync"
      }
    },
    "/api/conversations/{conv_id}/chat/stream": {
      "post": {
        "parameters": [
          {
            "in": "path",
            "name": "conv_id",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ],
        "responses": {
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Chat"
        ],
        "summary": "Stream chat response via SSE",
        "description": "Send a message and stream the response via Server-Sent Events.\n\nReturns text/event-stream with the following event types:\n- `thinking`: LLM thinking text (if enabled) - `{\"type\": \"thinking\", \"text\": \"...\"}`\n- `tool_start`: Tool starting - `{\"type\": \"tool_start\", \"tool\": \"web_search\", \"detail\": \"...\"}`\n- `tool_end`: Tool completed - `{\"type\": \"tool_end\", \"tool\": \"web_search\"}`\n- `token`: Content token - `{\"type\": \"token\", \"text\": \"...\"}`\n- `error`: Error occurred - `{\"type\": \"error\", \"message\": \"...\", \"code\": \"...\", \"retryable\": bool}`\n- `done`: Stream complete with metadata - `{\"type\": \"done\", \"id\": \"...\", \"created_at\": \"...\", ...}`\n\nUses SSE keepalive heartbeats (`: keepalive` comments) to prevent proxy timeouts.\n"
      }
    },
    "/api/messages/{message_id}/files/{file_index}": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "message_id",
            "schema": {
              "type": "string"
            },
            "required": true
          },
          {
            "in": "path",
            "name": "file_index",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Forbidden"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Files"
        ],
        "summary": "Get full file from a message",
        "description": "Returns the file as binary data with appropriate content-type header."
      }
    },
    "/api/messages/{message_id}/files/{file_index}/thumbnail": {
      "get": {
        "parameters": [
          {
            "in": "path",
            "name": "message_id",
            "schema": {
              "type": "string"
            },
            "required": true
          },
          {
            "in": "path",
            "name": "file_index",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Not found"
          },
          "202": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Accepted"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Forbidden"
          },
          "429": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPError"
                }
              }
            },
            "description": "Too Many Requests"
          }
        },
        "tags": [
          "Files"
        ],
        "summary": "Get thumbnail for an image file",
        "description": "Returns thumbnail binary data (200) or pending status (202)."
      }
    }
  },
  "openapi": "3.0.3",
  "components": {
    "schemas": {
      "UserContainerResponse.UserResponse": {
        "description": "User information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "picture": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Picture"
          }
        },
        "required": [
          "id",
          "email",
          "name"
        ],
        "title": "UserResponse",
        "type": "object"
      },
      "UserContainerResponse": {
        "description": "Response containing user info (used by /auth/me).",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserContainerResponse.UserResponse"
          }
        },
        "required": [
          "user"
        ],
        "title": "UserContainerResponse",
        "type": "object"
      },
      "ReadinessResponse.HealthCheckDetail": {
        "description": "Individual health check result.",
        "properties": {
          "status": {
            "title": "Status",
            "type": "string"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Message"
          }
        },
        "required": [
          "status"
        ],
        "title": "HealthCheckDetail",
        "type": "object"
      },
      "ReadinessResponse": {
        "description": "Readiness probe response.",
        "properties": {
          "status": {
            "description": "'ready' or 'not_ready'",
            "title": "Status",
            "type": "string"
          },
          "checks": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ReadinessResponse.HealthCheckDetail"
            },
            "title": "Checks",
            "type": "object"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Version"
          }
        },
        "required": [
          "status",
          "checks"
        ],
        "title": "ReadinessResponse",
        "type": "object"
      },
      "HTTPError": {
        "properties": {
          "detail": {
            "type": "object"
          },
          "message": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "ModelsListResponse.ModelResponse": {
        "description": "Available model info.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "short_name": {
            "description": "Short display name for compact UI (e.g., 'Fast', 'Advanced')",
            "title": "Short Name",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "short_name"
        ],
        "title": "ModelResponse",
        "type": "object"
      },
      "ModelsListResponse": {
        "description": "List of available models.",
        "properties": {
          "models": {
            "items": {
              "$ref": "#/components/schemas/ModelsListResponse.ModelResponse"
            },
            "title": "Models",
            "type": "array"
          },
          "default": {
            "type": "string",
            "description": "Default model ID",
            "title": "Default"
          }
        },
        "required": [
          "models",
          "default"
        ],
        "title": "ModelsListResponse",
        "type": "object"
      },
      "HealthResponse": {
        "description": "Liveness probe response.",
        "properties": {
          "status": {
            "title": "Status",
            "type": "string"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Version"
          }
        },
        "required": [
          "status"
        ],
        "title": "HealthResponse",
        "type": "object"
      },
      "SearchResultsResponse.SearchResultResponse": {
        "description": "Single search result.",
        "properties": {
          "conversation_id": {
            "description": "ID of the conversation containing the match",
            "title": "Conversation Id",
            "type": "string"
          },
          "conversation_title": {
            "description": "Title of the conversation",
            "title": "Conversation Title",
            "type": "string"
          },
          "message_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Message ID if match is in a message (null for title matches)",
            "title": "Message Id"
          },
          "message_snippet": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Snippet of matching text with [[HIGHLIGHT]] markers (null for title matches)",
            "title": "Message Snippet"
          },
          "match_type": {
            "description": "Whether the match is in conversation title or message content",
            "enum": [
              "conversation",
              "message"
            ],
            "title": "Match Type",
            "type": "string"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Message timestamp (null for title matches)",
            "title": "Created At"
          }
        },
        "required": [
          "conversation_id",
          "conversation_title",
          "match_type"
        ],
        "title": "SearchResultResponse",
        "type": "object"
      },
      "SearchResultsResponse": {
        "description": "Search results response.",
        "properties": {
          "results": {
            "description": "List of search results ordered by relevance",
            "items": {
              "$ref": "#/components/schemas/SearchResultsResponse.SearchResultResponse"
            },
            "title": "Results",
            "type": "array"
          },
          "total": {
            "description": "Total number of matching results",
            "title": "Total",
            "type": "integer"
          },
          "query": {
            "description": "The search query that was executed",
            "title": "Query",
            "type": "string"
          }
        },
        "required": [
          "results",
          "total",
          "query"
        ],
        "title": "SearchResultsResponse",
        "type": "object"
      },
      "AgentsListResponse.AgentResponse": {
        "description": "Agent information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "System Prompt"
          },
          "schedule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Schedule"
          },
          "timezone": {
            "title": "Timezone",
            "type": "string"
          },
          "enabled": {
            "title": "Enabled",
            "type": "boolean"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Permissions"
          },
          "model": {
            "description": "LLM model for the agent",
            "title": "Model",
            "type": "string"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Conversation Id"
          },
          "last_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Last Run At"
          },
          "next_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Next Run At"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "budget_limit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Daily budget limit in USD (null = unlimited)",
            "title": "Budget Limit"
          },
          "daily_spending": {
            "default": 0,
            "description": "Today's spending in USD",
            "title": "Daily Spending",
            "type": "number"
          },
          "has_pending_approval": {
            "default": false,
            "description": "Whether agent is blocked waiting for approval",
            "title": "Has Pending Approval",
            "type": "boolean"
          },
          "has_error": {
            "default": false,
            "description": "Whether the last execution failed",
            "title": "Has Error",
            "type": "boolean"
          },
          "unread_count": {
            "default": 0,
            "description": "Number of unread messages in agent conversation",
            "title": "Unread Count",
            "type": "integer"
          },
          "last_execution_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Status of the most recent execution (completed, failed, etc.)",
            "title": "Last Execution Status"
          }
        },
        "required": [
          "id",
          "name",
          "timezone",
          "enabled",
          "model",
          "created_at",
          "updated_at"
        ],
        "title": "AgentResponse",
        "type": "object"
      },
      "AgentsListResponse": {
        "description": "List of agents.",
        "properties": {
          "agents": {
            "items": {
              "$ref": "#/components/schemas/AgentsListResponse.AgentResponse"
            },
            "title": "Agents",
            "type": "array"
          }
        },
        "required": [
          "agents"
        ],
        "title": "AgentsListResponse",
        "type": "object"
      },
      "AgentResponse": {
        "description": "Agent information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "System Prompt"
          },
          "schedule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Schedule"
          },
          "timezone": {
            "title": "Timezone",
            "type": "string"
          },
          "enabled": {
            "title": "Enabled",
            "type": "boolean"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Permissions"
          },
          "model": {
            "description": "LLM model for the agent",
            "title": "Model",
            "type": "string"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Conversation Id"
          },
          "last_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Last Run At"
          },
          "next_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Next Run At"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "budget_limit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Daily budget limit in USD (null = unlimited)",
            "title": "Budget Limit"
          },
          "daily_spending": {
            "default": 0,
            "description": "Today's spending in USD",
            "title": "Daily Spending",
            "type": "number"
          },
          "has_pending_approval": {
            "default": false,
            "description": "Whether agent is blocked waiting for approval",
            "title": "Has Pending Approval",
            "type": "boolean"
          },
          "has_error": {
            "default": false,
            "description": "Whether the last execution failed",
            "title": "Has Error",
            "type": "boolean"
          },
          "unread_count": {
            "default": 0,
            "description": "Number of unread messages in agent conversation",
            "title": "Unread Count",
            "type": "integer"
          },
          "last_execution_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Status of the most recent execution (completed, failed, etc.)",
            "title": "Last Execution Status"
          }
        },
        "required": [
          "id",
          "name",
          "timezone",
          "enabled",
          "model",
          "created_at",
          "updated_at"
        ],
        "title": "AgentResponse",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "detail": {
            "type": "object",
            "properties": {
              "<location>": {
                "type": "object",
                "properties": {
                  "<field_name>": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "message": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "CreateAgentRequest": {
        "description": "Schema for POST /api/agents.",
        "properties": {
          "name": {
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "type": "string"
          },
          "description": {
            "anyOf": [
              {
                "maxLength": 500,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "maxLength": 10000,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "System Prompt"
          },
          "schedule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cron expression (e.g., '0 9 * * *' for daily at 9am)",
            "title": "Schedule"
          },
          "timezone": {
            "default": "UTC",
            "description": "IANA timezone for schedule",
            "title": "Timezone",
            "type": "string"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "List of allowed tool names",
            "title": "Tool Permissions"
          },
          "enabled": {
            "default": true,
            "title": "Enabled",
            "type": "boolean"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "LLM model for the agent (defaults to Fast)",
            "title": "Model"
          },
          "budget_limit": {
            "anyOf": [
              {
                "minimum": 0,
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Daily budget limit in USD (null = unlimited)",
            "title": "Budget Limit"
          }
        },
        "required": [
          "name"
        ],
        "title": "CreateAgentRequest",
        "type": "object"
      },
      "AuthResponse.UserResponse": {
        "description": "User information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "picture": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Picture"
          }
        },
        "required": [
          "id",
          "email",
          "name"
        ],
        "title": "UserResponse",
        "type": "object"
      },
      "AuthResponse": {
        "description": "Response from successful authentication.",
        "properties": {
          "token": {
            "description": "JWT token for subsequent requests",
            "title": "Token",
            "type": "string"
          },
          "user": {
            "$ref": "#/components/schemas/AuthResponse.UserResponse"
          }
        },
        "required": [
          "token",
          "user"
        ],
        "title": "AuthResponse",
        "type": "object"
      },
      "VersionResponse": {
        "description": "App version info.",
        "properties": {
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "App version (JS bundle hash)",
            "title": "Version"
          }
        },
        "title": "VersionResponse",
        "type": "object"
      },
      "PlannerDashboardResponse.PlannerDayResponse": {
        "description": "A single day in the planner dashboard.",
        "properties": {
          "date": {
            "description": "Date in YYYY-MM-DD format",
            "title": "Date",
            "type": "string"
          },
          "day_name": {
            "description": "Day label (Today, Tomorrow, or weekday name)",
            "title": "Day Name",
            "type": "string"
          },
          "events": {
            "items": {
              "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerEventResponse"
            },
            "title": "Events",
            "type": "array"
          },
          "tasks": {
            "items": {
              "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerTaskResponse"
            },
            "title": "Tasks",
            "type": "array"
          }
        },
        "required": [
          "date",
          "day_name"
        ],
        "title": "PlannerDayResponse",
        "type": "object"
      },
      "PlannerDashboardResponse.PlannerEventAttendeeResponse": {
        "description": "An attendee on a calendar event.",
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Email"
          },
          "response_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "RSVP status: accepted/tentative/declined/needsAction",
            "title": "Response Status"
          },
          "self": {
            "default": false,
            "description": "True if this is the current user",
            "title": "Self",
            "type": "boolean"
          }
        },
        "title": "PlannerEventAttendeeResponse",
        "type": "object"
      },
      "PlannerDashboardResponse.PlannerEventOrganizerResponse": {
        "description": "The organizer/creator of a calendar event.",
        "properties": {
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Email"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Display name of organizer",
            "title": "Display Name"
          },
          "self": {
            "default": false,
            "description": "True if this is the current user",
            "title": "Self",
            "type": "boolean"
          }
        },
        "title": "PlannerEventOrganizerResponse",
        "type": "object"
      },
      "PlannerDashboardResponse.PlannerEventResponse": {
        "description": "A calendar event for the planner dashboard.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "summary": {
            "title": "Summary",
            "type": "string"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Start datetime (ISO format)",
            "title": "Start"
          },
          "end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "End datetime (ISO format)",
            "title": "End"
          },
          "start_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Start date for all-day events (YYYY-MM-DD)",
            "title": "Start Date"
          },
          "end_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "End date for all-day events (YYYY-MM-DD)",
            "title": "End Date"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Location"
          },
          "html_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Direct URL to event in Google Calendar",
            "title": "Html Link"
          },
          "is_all_day": {
            "default": false,
            "title": "Is All Day",
            "type": "boolean"
          },
          "attendees": {
            "items": {
              "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerEventAttendeeResponse"
            },
            "title": "Attendees",
            "type": "array"
          },
          "organizer": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerEventOrganizerResponse"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Event organizer/creator"
          },
          "calendar_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Source calendar ID (e.g., 'primary', email address)",
            "title": "Calendar Id"
          },
          "calendar_summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Source calendar name/title",
            "title": "Calendar Summary"
          }
        },
        "required": [
          "id",
          "summary"
        ],
        "title": "PlannerEventResponse",
        "type": "object"
      },
      "PlannerDashboardResponse.PlannerTaskResponse": {
        "description": "A task from Todoist for the planner dashboard.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "description": {
            "default": "",
            "title": "Description",
            "type": "string"
          },
          "due_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Due date in YYYY-MM-DD format",
            "title": "Due Date"
          },
          "due_string": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Human-readable due string (e.g., 'tomorrow at 3pm')",
            "title": "Due String"
          },
          "priority": {
            "default": 1,
            "description": "Priority 1-4 (4 is highest)",
            "maximum": 4,
            "minimum": 1,
            "title": "Priority",
            "type": "integer"
          },
          "project_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Project Name"
          },
          "section_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Section Name"
          },
          "labels": {
            "items": {
              "type": "string"
            },
            "title": "Labels",
            "type": "array"
          },
          "is_recurring": {
            "default": false,
            "title": "Is Recurring",
            "type": "boolean"
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Direct URL to task in Todoist",
            "title": "Url"
          }
        },
        "required": [
          "id",
          "content"
        ],
        "title": "PlannerTaskResponse",
        "type": "object"
      },
      "PlannerDashboardResponse": {
        "description": "Complete planner dashboard data.",
        "properties": {
          "days": {
            "description": "7 days of events and tasks starting from today",
            "items": {
              "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerDayResponse"
            },
            "title": "Days",
            "type": "array"
          },
          "overdue_tasks": {
            "description": "Tasks that are past their due date",
            "items": {
              "$ref": "#/components/schemas/PlannerDashboardResponse.PlannerTaskResponse"
            },
            "title": "Overdue Tasks",
            "type": "array"
          },
          "todoist_connected": {
            "default": false,
            "description": "Whether Todoist is connected",
            "title": "Todoist Connected",
            "type": "boolean"
          },
          "calendar_connected": {
            "default": false,
            "description": "Whether Google Calendar is connected",
            "title": "Calendar Connected",
            "type": "boolean"
          },
          "todoist_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Error message if Todoist fetch failed",
            "title": "Todoist Error"
          },
          "calendar_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Error message if Calendar fetch failed",
            "title": "Calendar Error"
          },
          "server_time": {
            "description": "Server timestamp for cache validation",
            "title": "Server Time",
            "type": "string"
          }
        },
        "required": [
          "days",
          "server_time"
        ],
        "title": "PlannerDashboardResponse",
        "type": "object"
      },
      "TokenRefreshResponse": {
        "description": "Response from token refresh.",
        "properties": {
          "token": {
            "description": "New JWT token",
            "title": "Token",
            "type": "string"
          }
        },
        "required": [
          "token"
        ],
        "title": "TokenRefreshResponse",
        "type": "object"
      },
      "MemoriesListResponse.MemoryResponse": {
        "description": "Single memory entry.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Category"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "content",
          "created_at",
          "updated_at"
        ],
        "title": "MemoryResponse",
        "type": "object"
      },
      "MemoriesListResponse": {
        "description": "List of memories.",
        "properties": {
          "memories": {
            "items": {
              "$ref": "#/components/schemas/MemoriesListResponse.MemoryResponse"
            },
            "title": "Memories",
            "type": "array"
          }
        },
        "required": [
          "memories"
        ],
        "title": "MemoriesListResponse",
        "type": "object"
      },
      "ClientIdResponse": {
        "description": "Response containing Google Client ID.",
        "properties": {
          "client_id": {
            "title": "Client Id",
            "type": "string"
          }
        },
        "required": [
          "client_id"
        ],
        "title": "ClientIdResponse",
        "type": "object"
      },
      "PlannerSyncResponse.PlannerConversationSyncData": {
        "description": "Planner conversation data for sync.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "message_count": {
            "title": "Message Count",
            "type": "integer"
          },
          "last_reset": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Timestamp of last reset",
            "title": "Last Reset"
          }
        },
        "required": [
          "id",
          "updated_at",
          "message_count"
        ],
        "title": "PlannerConversationSyncData",
        "type": "object"
      },
      "PlannerSyncResponse": {
        "description": "Response from planner sync endpoint for real-time synchronization.",
        "properties": {
          "conversation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PlannerSyncResponse.PlannerConversationSyncData"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Planner conversation state, or null if no planner exists"
          },
          "server_time": {
            "description": "Server timestamp in ISO format",
            "title": "Server Time",
            "type": "string"
          }
        },
        "required": [
          "server_time"
        ],
        "title": "PlannerSyncResponse",
        "type": "object"
      },
      "UploadConfigResponse": {
        "description": "File upload configuration.",
        "properties": {
          "maxFileSize": {
            "description": "Maximum file size in bytes",
            "title": "Maxfilesize",
            "type": "integer"
          },
          "maxFilesPerMessage": {
            "description": "Maximum files per message",
            "title": "Maxfilespermessage",
            "type": "integer"
          },
          "allowedFileTypes": {
            "description": "Allowed MIME types",
            "items": {
              "type": "string"
            },
            "title": "Allowedfiletypes",
            "type": "array"
          }
        },
        "required": [
          "maxFileSize",
          "maxFilesPerMessage",
          "allowedFileTypes"
        ],
        "title": "UploadConfigResponse",
        "type": "object"
      },
      "ConversationsListPaginatedResponse.ConversationResponse": {
        "description": "Conversation summary (without messages).",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Message Count"
          }
        },
        "required": [
          "id",
          "title",
          "model",
          "created_at",
          "updated_at"
        ],
        "title": "ConversationResponse",
        "type": "object"
      },
      "ConversationsListPaginatedResponse.ConversationsPaginationResponse": {
        "description": "Pagination info for conversations list.",
        "properties": {
          "next_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cursor for fetching next page (null if no more)",
            "title": "Next Cursor"
          },
          "has_more": {
            "description": "Whether there are more pages",
            "title": "Has More",
            "type": "boolean"
          },
          "total_count": {
            "description": "Total number of conversations",
            "title": "Total Count",
            "type": "integer"
          }
        },
        "required": [
          "has_more",
          "total_count"
        ],
        "title": "ConversationsPaginationResponse",
        "type": "object"
      },
      "ConversationsListPaginatedResponse": {
        "description": "Paginated list of conversations.",
        "properties": {
          "conversations": {
            "items": {
              "$ref": "#/components/schemas/ConversationsListPaginatedResponse.ConversationResponse"
            },
            "title": "Conversations",
            "type": "array"
          },
          "pagination": {
            "$ref": "#/components/schemas/ConversationsListPaginatedResponse.ConversationsPaginationResponse"
          }
        },
        "required": [
          "conversations",
          "pagination"
        ],
        "title": "ConversationsListPaginatedResponse",
        "type": "object"
      },
      "ConversationResponse": {
        "description": "Conversation summary (without messages).",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Message Count"
          }
        },
        "required": [
          "id",
          "title",
          "model",
          "created_at",
          "updated_at"
        ],
        "title": "ConversationResponse",
        "type": "object"
      },
      "PlannerResetResponse": {
        "description": "Response from planner reset endpoint.",
        "properties": {
          "success": {
            "default": true,
            "title": "Success",
            "type": "boolean"
          },
          "message": {
            "default": "Planner conversation reset",
            "title": "Message",
            "type": "string"
          }
        },
        "title": "PlannerResetResponse",
        "type": "object"
      },
      "TodoistStatusResponse": {
        "description": "Response containing Todoist connection status.",
        "properties": {
          "connected": {
            "description": "Whether Todoist is connected",
            "title": "Connected",
            "type": "boolean"
          },
          "todoist_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Email of connected Todoist account",
            "title": "Todoist Email"
          },
          "connected_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO timestamp when connected",
            "title": "Connected At"
          },
          "needs_reconnect": {
            "default": false,
            "description": "True if token is invalid and user needs to reconnect",
            "title": "Needs Reconnect",
            "type": "boolean"
          }
        },
        "required": [
          "connected"
        ],
        "title": "TodoistStatusResponse",
        "type": "object"
      },
      "TodoistConnectResponse": {
        "description": "Response from successful Todoist connection.",
        "properties": {
          "connected": {
            "description": "Whether connection was successful",
            "title": "Connected",
            "type": "boolean"
          },
          "todoist_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Email of connected Todoist account",
            "title": "Todoist Email"
          }
        },
        "required": [
          "connected"
        ],
        "title": "TodoistConnectResponse",
        "type": "object"
      },
      "GoogleCalendarStatusResponse": {
        "description": "Response containing Google Calendar connection status.",
        "properties": {
          "connected": {
            "description": "Whether Google Calendar is connected",
            "title": "Connected",
            "type": "boolean"
          },
          "calendar_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Email of connected Google account",
            "title": "Calendar Email"
          },
          "connected_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO timestamp when connected",
            "title": "Connected At"
          },
          "needs_reconnect": {
            "default": false,
            "description": "True if tokens are invalid/expired and user must reconnect",
            "title": "Needs Reconnect",
            "type": "boolean"
          }
        },
        "required": [
          "connected"
        ],
        "title": "GoogleCalendarStatusResponse",
        "type": "object"
      },
      "PendingApprovalsResponse.ApprovalRequestResponse": {
        "description": "Approval request information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "agent_id": {
            "title": "Agent Id",
            "type": "string"
          },
          "agent_name": {
            "description": "Name of the agent requesting approval",
            "title": "Agent Name",
            "type": "string"
          },
          "tool_name": {
            "title": "Tool Name",
            "type": "string"
          },
          "tool_args": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Args"
          },
          "description": {
            "title": "Description",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/PendingApprovalsResponse.ApprovalStatus"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Resolved At"
          }
        },
        "required": [
          "id",
          "agent_id",
          "agent_name",
          "tool_name",
          "description",
          "status",
          "created_at"
        ],
        "title": "ApprovalRequestResponse",
        "type": "object"
      },
      "PendingApprovalsResponse.ApprovalStatus": {
        "description": "Status of an approval request.",
        "enum": [
          "pending",
          "approved",
          "rejected"
        ],
        "title": "ApprovalStatus",
        "type": "string"
      },
      "PendingApprovalsResponse": {
        "description": "List of pending approval requests.",
        "properties": {
          "pending_approvals": {
            "description": "All pending approval requests",
            "items": {
              "$ref": "#/components/schemas/PendingApprovalsResponse.ApprovalRequestResponse"
            },
            "title": "Pending Approvals",
            "type": "array"
          }
        },
        "title": "PendingApprovalsResponse",
        "type": "object"
      },
      "TodoistAuthUrlResponse": {
        "description": "Response containing Todoist OAuth authorization URL.",
        "properties": {
          "auth_url": {
            "description": "URL to redirect user for Todoist authorization",
            "title": "Auth Url",
            "type": "string"
          },
          "state": {
            "description": "CSRF state token to validate on callback",
            "title": "State",
            "type": "string"
          }
        },
        "required": [
          "auth_url",
          "state"
        ],
        "title": "TodoistAuthUrlResponse",
        "type": "object"
      },
      "GoogleCalendarConnectResponse": {
        "description": "Response from successful Google Calendar connection.",
        "properties": {
          "connected": {
            "description": "Whether connection was successful",
            "title": "Connected",
            "type": "boolean"
          },
          "calendar_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Email of Google account granting Calendar access",
            "title": "Calendar Email"
          }
        },
        "required": [
          "connected"
        ],
        "title": "GoogleCalendarConnectResponse",
        "type": "object"
      },
      "UserSettingsResponse": {
        "description": "User settings.",
        "properties": {
          "custom_instructions": {
            "default": "",
            "description": "Custom instructions for the AI",
            "title": "Custom Instructions",
            "type": "string"
          },
          "whatsapp_phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "WhatsApp phone number in E.164 format",
            "title": "Whatsapp Phone"
          },
          "whatsapp_available": {
            "default": false,
            "description": "Whether WhatsApp is configured at the app level",
            "title": "Whatsapp Available",
            "type": "boolean"
          }
        },
        "title": "UserSettingsResponse",
        "type": "object"
      },
      "StatusResponse": {
        "description": "Simple status response for operations that don't return data.",
        "properties": {
          "status": {
            "description": "Operation status (e.g., 'updated', 'deleted')",
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "title": "StatusResponse",
        "type": "object"
      },
      "UpdateAgentRequest": {
        "description": "Schema for PATCH /api/agents/<id>.",
        "properties": {
          "name": {
            "anyOf": [
              {
                "maxLength": 100,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "maxLength": 500,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "maxLength": 10000,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "System Prompt"
          },
          "schedule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Schedule"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Timezone"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Permissions"
          },
          "enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Enabled"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Model"
          },
          "budget_limit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Budget Limit"
          }
        },
        "title": "UpdateAgentRequest",
        "type": "object"
      },
      "GoogleCalendarAuthUrlResponse": {
        "description": "Response containing Google Calendar OAuth authorization URL.",
        "properties": {
          "auth_url": {
            "description": "URL to redirect user for Google authorization",
            "title": "Auth Url",
            "type": "string"
          },
          "state": {
            "description": "CSRF state token to validate on callback",
            "title": "State",
            "type": "string"
          }
        },
        "required": [
          "auth_url",
          "state"
        ],
        "title": "GoogleCalendarAuthUrlResponse",
        "type": "object"
      },
      "SyncResponse.SyncConversationResponse": {
        "description": "Conversation summary for sync endpoint.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "message_count": {
            "title": "Message Count",
            "type": "integer"
          }
        },
        "required": [
          "id",
          "title",
          "model",
          "updated_at",
          "message_count"
        ],
        "title": "SyncConversationResponse",
        "type": "object"
      },
      "SyncResponse": {
        "description": "Response from sync endpoint.",
        "properties": {
          "conversations": {
            "items": {
              "$ref": "#/components/schemas/SyncResponse.SyncConversationResponse"
            },
            "title": "Conversations",
            "type": "array"
          },
          "server_time": {
            "description": "ISO timestamp to use for next sync",
            "title": "Server Time",
            "type": "string"
          },
          "is_full_sync": {
            "title": "Is Full Sync",
            "type": "boolean"
          }
        },
        "required": [
          "conversations",
          "server_time",
          "is_full_sync"
        ],
        "title": "SyncResponse",
        "type": "object"
      },
      "CalendarListResponse.Calendar": {
        "description": "A Google Calendar.",
        "properties": {
          "id": {
            "description": "Calendar ID",
            "title": "Id",
            "type": "string"
          },
          "summary": {
            "description": "Calendar name/title",
            "title": "Summary",
            "type": "string"
          },
          "primary": {
            "description": "Whether this is the user's primary calendar",
            "title": "Primary",
            "type": "boolean"
          },
          "access_role": {
            "description": "User's access level (owner, writer, reader)",
            "title": "Access Role",
            "type": "string"
          },
          "background_color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Calendar background color (hex)",
            "title": "Background Color"
          }
        },
        "required": [
          "id",
          "summary",
          "primary",
          "access_role"
        ],
        "title": "Calendar",
        "type": "object"
      },
      "CalendarListResponse": {
        "description": "Response for listing available calendars.",
        "properties": {
          "calendars": {
            "description": "List of available calendars",
            "items": {
              "$ref": "#/components/schemas/CalendarListResponse.Calendar"
            },
            "title": "Calendars",
            "type": "array"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Error message if fetch failed",
            "title": "Error"
          }
        },
        "title": "CalendarListResponse",
        "type": "object"
      },
      "PlannerConversationResponse.FileMetadataResponse": {
        "description": "File metadata in message responses (excludes full data for performance).",
        "properties": {
          "name": {
            "title": "Name",
            "type": "string"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "messageId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Messageid"
          },
          "fileIndex": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Fileindex"
          }
        },
        "required": [
          "name",
          "type"
        ],
        "title": "FileMetadataResponse",
        "type": "object"
      },
      "PlannerConversationResponse.GeneratedImageResponse": {
        "description": "Generated image metadata.",
        "properties": {
          "prompt": {
            "title": "Prompt",
            "type": "string"
          },
          "image_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Index"
          }
        },
        "required": [
          "prompt"
        ],
        "title": "GeneratedImageResponse",
        "type": "object"
      },
      "PlannerConversationResponse.MessageResponse": {
        "description": "Message in a conversation.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "role": {
            "enum": [
              "user",
              "assistant"
            ],
            "title": "Role",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "files": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/PlannerConversationResponse.FileMetadataResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Files"
          },
          "sources": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/PlannerConversationResponse.SourceResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Sources"
          },
          "generated_images": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/PlannerConversationResponse.GeneratedImageResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Generated Images"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO 639-1 language code for TTS (e.g., 'en', 'cs')",
            "title": "Language"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "role",
          "content",
          "created_at"
        ],
        "title": "MessageResponse",
        "type": "object"
      },
      "PlannerConversationResponse.SourceResponse": {
        "description": "Web search source citation.",
        "properties": {
          "title": {
            "title": "Title",
            "type": "string"
          },
          "url": {
            "title": "Url",
            "type": "string"
          }
        },
        "required": [
          "title",
          "url"
        ],
        "title": "SourceResponse",
        "type": "object"
      },
      "PlannerConversationResponse": {
        "description": "Planner conversation with messages.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/PlannerConversationResponse.MessageResponse"
            },
            "title": "Messages",
            "type": "array"
          },
          "was_reset": {
            "default": false,
            "description": "True if the conversation was auto-reset due to 4am cutoff",
            "title": "Was Reset",
            "type": "boolean"
          }
        },
        "required": [
          "id",
          "title",
          "model",
          "created_at",
          "updated_at",
          "messages"
        ],
        "title": "PlannerConversationResponse",
        "type": "object"
      },
      "TriggerAgentResponse.AgentExecutionResponse": {
        "description": "Agent execution record.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "agent_id": {
            "title": "Agent Id",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/TriggerAgentResponse.AgentStatus"
          },
          "trigger_type": {
            "$ref": "#/components/schemas/TriggerAgentResponse.AgentTriggerType"
          },
          "triggered_by_agent_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Triggered By Agent Id"
          },
          "started_at": {
            "title": "Started At",
            "type": "string"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Completed At"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Error Message"
          }
        },
        "required": [
          "id",
          "agent_id",
          "status",
          "trigger_type",
          "started_at"
        ],
        "title": "AgentExecutionResponse",
        "type": "object"
      },
      "TriggerAgentResponse.AgentStatus": {
        "description": "Status of an agent execution.",
        "enum": [
          "running",
          "completed",
          "failed",
          "waiting_approval"
        ],
        "title": "AgentStatus",
        "type": "string"
      },
      "TriggerAgentResponse.AgentTriggerType": {
        "description": "How an agent execution was triggered.",
        "enum": [
          "scheduled",
          "manual",
          "agent_trigger"
        ],
        "title": "AgentTriggerType",
        "type": "string"
      },
      "TriggerAgentResponse": {
        "description": "Response from manually triggering an agent.",
        "properties": {
          "execution": {
            "$ref": "#/components/schemas/TriggerAgentResponse.AgentExecutionResponse"
          },
          "message": {
            "default": "Agent triggered",
            "description": "Status message",
            "title": "Message",
            "type": "string"
          }
        },
        "required": [
          "execution"
        ],
        "title": "TriggerAgentResponse",
        "type": "object"
      },
      "CommandCenterResponse.AgentExecutionResponse": {
        "description": "Agent execution record.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "agent_id": {
            "title": "Agent Id",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/CommandCenterResponse.AgentStatus"
          },
          "trigger_type": {
            "$ref": "#/components/schemas/CommandCenterResponse.AgentTriggerType"
          },
          "triggered_by_agent_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Triggered By Agent Id"
          },
          "started_at": {
            "title": "Started At",
            "type": "string"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Completed At"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Error Message"
          }
        },
        "required": [
          "id",
          "agent_id",
          "status",
          "trigger_type",
          "started_at"
        ],
        "title": "AgentExecutionResponse",
        "type": "object"
      },
      "CommandCenterResponse.AgentResponse": {
        "description": "Agent information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "name": {
            "title": "Name",
            "type": "string"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "System Prompt"
          },
          "schedule": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Schedule"
          },
          "timezone": {
            "title": "Timezone",
            "type": "string"
          },
          "enabled": {
            "title": "Enabled",
            "type": "boolean"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Permissions"
          },
          "model": {
            "description": "LLM model for the agent",
            "title": "Model",
            "type": "string"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Conversation Id"
          },
          "last_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Last Run At"
          },
          "next_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Next Run At"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "budget_limit": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Daily budget limit in USD (null = unlimited)",
            "title": "Budget Limit"
          },
          "daily_spending": {
            "default": 0,
            "description": "Today's spending in USD",
            "title": "Daily Spending",
            "type": "number"
          },
          "has_pending_approval": {
            "default": false,
            "description": "Whether agent is blocked waiting for approval",
            "title": "Has Pending Approval",
            "type": "boolean"
          },
          "has_error": {
            "default": false,
            "description": "Whether the last execution failed",
            "title": "Has Error",
            "type": "boolean"
          },
          "unread_count": {
            "default": 0,
            "description": "Number of unread messages in agent conversation",
            "title": "Unread Count",
            "type": "integer"
          },
          "last_execution_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Status of the most recent execution (completed, failed, etc.)",
            "title": "Last Execution Status"
          }
        },
        "required": [
          "id",
          "name",
          "timezone",
          "enabled",
          "model",
          "created_at",
          "updated_at"
        ],
        "title": "AgentResponse",
        "type": "object"
      },
      "CommandCenterResponse.AgentStatus": {
        "description": "Status of an agent execution.",
        "enum": [
          "running",
          "completed",
          "failed",
          "waiting_approval"
        ],
        "title": "AgentStatus",
        "type": "string"
      },
      "CommandCenterResponse.AgentTriggerType": {
        "description": "How an agent execution was triggered.",
        "enum": [
          "scheduled",
          "manual",
          "agent_trigger"
        ],
        "title": "AgentTriggerType",
        "type": "string"
      },
      "CommandCenterResponse.ApprovalRequestResponse": {
        "description": "Approval request information.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "agent_id": {
            "title": "Agent Id",
            "type": "string"
          },
          "agent_name": {
            "description": "Name of the agent requesting approval",
            "title": "Agent Name",
            "type": "string"
          },
          "tool_name": {
            "title": "Tool Name",
            "type": "string"
          },
          "tool_args": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Tool Args"
          },
          "description": {
            "title": "Description",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/CommandCenterResponse.ApprovalStatus"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Resolved At"
          }
        },
        "required": [
          "id",
          "agent_id",
          "agent_name",
          "tool_name",
          "description",
          "status",
          "created_at"
        ],
        "title": "ApprovalRequestResponse",
        "type": "object"
      },
      "CommandCenterResponse.ApprovalStatus": {
        "description": "Status of an approval request.",
        "enum": [
          "pending",
          "approved",
          "rejected"
        ],
        "title": "ApprovalStatus",
        "type": "string"
      },
      "CommandCenterResponse": {
        "description": "Complete command center dashboard data.",
        "properties": {
          "agents": {
            "description": "All agents with unread counts and pending status",
            "items": {
              "$ref": "#/components/schemas/CommandCenterResponse.AgentResponse"
            },
            "title": "Agents",
            "type": "array"
          },
          "pending_approvals": {
            "description": "All pending approval requests",
            "items": {
              "$ref": "#/components/schemas/CommandCenterResponse.ApprovalRequestResponse"
            },
            "title": "Pending Approvals",
            "type": "array"
          },
          "recent_executions": {
            "description": "Recent execution history across all agents",
            "items": {
              "$ref": "#/components/schemas/CommandCenterResponse.AgentExecutionResponse"
            },
            "title": "Recent Executions",
            "type": "array"
          },
          "total_unread": {
            "default": 0,
            "description": "Total unread messages across all agents",
            "title": "Total Unread",
            "type": "integer"
          },
          "agents_waiting": {
            "default": 0,
            "description": "Number of agents blocked on approval",
            "title": "Agents Waiting",
            "type": "integer"
          },
          "agents_with_errors": {
            "default": 0,
            "description": "Number of agents whose last execution failed",
            "title": "Agents With Errors",
            "type": "integer"
          }
        },
        "required": [
          "agents"
        ],
        "title": "CommandCenterResponse",
        "type": "object"
      },
      "MonthlyCostResponse.ModelCostBreakdown": {
        "description": "Cost breakdown by model.",
        "properties": {
          "total": {
            "title": "Total",
            "type": "number"
          },
          "total_usd": {
            "title": "Total Usd",
            "type": "number"
          },
          "message_count": {
            "title": "Message Count",
            "type": "integer"
          },
          "formatted": {
            "title": "Formatted",
            "type": "string"
          }
        },
        "required": [
          "total",
          "total_usd",
          "message_count",
          "formatted"
        ],
        "title": "ModelCostBreakdown",
        "type": "object"
      },
      "MonthlyCostResponse": {
        "description": "Monthly cost for a user.",
        "properties": {
          "user_id": {
            "title": "User Id",
            "type": "string"
          },
          "year": {
            "title": "Year",
            "type": "integer"
          },
          "month": {
            "title": "Month",
            "type": "integer"
          },
          "total_usd": {
            "title": "Total Usd",
            "type": "number"
          },
          "total": {
            "description": "Total in display currency",
            "title": "Total",
            "type": "number"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "formatted": {
            "title": "Formatted",
            "type": "string"
          },
          "message_count": {
            "title": "Message Count",
            "type": "integer"
          },
          "breakdown": {
            "additionalProperties": {
              "$ref": "#/components/schemas/MonthlyCostResponse.ModelCostBreakdown"
            },
            "title": "Breakdown",
            "type": "object"
          }
        },
        "required": [
          "user_id",
          "year",
          "month",
          "total_usd",
          "total",
          "currency",
          "formatted",
          "message_count",
          "breakdown"
        ],
        "title": "MonthlyCostResponse",
        "type": "object"
      },
      "CostHistoryResponse.MonthCostEntry": {
        "description": "Single month in cost history.",
        "properties": {
          "year": {
            "title": "Year",
            "type": "integer"
          },
          "month": {
            "title": "Month",
            "type": "integer"
          },
          "total_usd": {
            "title": "Total Usd",
            "type": "number"
          },
          "total": {
            "title": "Total",
            "type": "number"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "formatted": {
            "title": "Formatted",
            "type": "string"
          },
          "message_count": {
            "title": "Message Count",
            "type": "integer"
          }
        },
        "required": [
          "year",
          "month",
          "total_usd",
          "total",
          "currency",
          "formatted",
          "message_count"
        ],
        "title": "MonthCostEntry",
        "type": "object"
      },
      "CostHistoryResponse": {
        "description": "Cost history for a user.",
        "properties": {
          "user_id": {
            "title": "User Id",
            "type": "string"
          },
          "history": {
            "items": {
              "$ref": "#/components/schemas/CostHistoryResponse.MonthCostEntry"
            },
            "title": "History",
            "type": "array"
          }
        },
        "required": [
          "user_id",
          "history"
        ],
        "title": "CostHistoryResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse.FileMetadataResponse": {
        "description": "File metadata in message responses (excludes full data for performance).",
        "properties": {
          "name": {
            "title": "Name",
            "type": "string"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "messageId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Messageid"
          },
          "fileIndex": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Fileindex"
          }
        },
        "required": [
          "name",
          "type"
        ],
        "title": "FileMetadataResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse.GeneratedImageResponse": {
        "description": "Generated image metadata.",
        "properties": {
          "prompt": {
            "title": "Prompt",
            "type": "string"
          },
          "image_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Index"
          }
        },
        "required": [
          "prompt"
        ],
        "title": "GeneratedImageResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse.MessageResponse": {
        "description": "Message in a conversation.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "role": {
            "enum": [
              "user",
              "assistant"
            ],
            "title": "Role",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "files": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ConversationDetailPaginatedResponse.FileMetadataResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Files"
          },
          "sources": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ConversationDetailPaginatedResponse.SourceResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Sources"
          },
          "generated_images": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ConversationDetailPaginatedResponse.GeneratedImageResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Generated Images"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO 639-1 language code for TTS (e.g., 'en', 'cs')",
            "title": "Language"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "role",
          "content",
          "created_at"
        ],
        "title": "MessageResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse.MessagesPaginationResponse": {
        "description": "Pagination info for messages list.",
        "properties": {
          "older_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cursor for fetching older messages (null if at oldest)",
            "title": "Older Cursor"
          },
          "newer_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cursor for fetching newer messages (null if at newest)",
            "title": "Newer Cursor"
          },
          "has_older": {
            "description": "Whether there are older messages",
            "title": "Has Older",
            "type": "boolean"
          },
          "has_newer": {
            "description": "Whether there are newer messages",
            "title": "Has Newer",
            "type": "boolean"
          },
          "total_count": {
            "description": "Total number of messages in conversation",
            "title": "Total Count",
            "type": "integer"
          }
        },
        "required": [
          "has_older",
          "has_newer",
          "total_count"
        ],
        "title": "MessagesPaginationResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse.SourceResponse": {
        "description": "Web search source citation.",
        "properties": {
          "title": {
            "title": "Title",
            "type": "string"
          },
          "url": {
            "title": "Url",
            "type": "string"
          }
        },
        "required": [
          "title",
          "url"
        ],
        "title": "SourceResponse",
        "type": "object"
      },
      "ConversationDetailPaginatedResponse": {
        "description": "Full conversation with paginated messages.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string"
          },
          "is_agent": {
            "default": false,
            "title": "Is Agent",
            "type": "boolean"
          },
          "agent_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Agent Id"
          },
          "has_pending_approval": {
            "default": false,
            "title": "Has Pending Approval",
            "type": "boolean"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/ConversationDetailPaginatedResponse.MessageResponse"
            },
            "title": "Messages",
            "type": "array"
          },
          "message_pagination": {
            "$ref": "#/components/schemas/ConversationDetailPaginatedResponse.MessagesPaginationResponse"
          }
        },
        "required": [
          "id",
          "title",
          "model",
          "created_at",
          "updated_at",
          "messages",
          "message_pagination"
        ],
        "title": "ConversationDetailPaginatedResponse",
        "type": "object"
      },
      "ParseScheduleResponse": {
        "description": "Response from schedule parsing endpoint.",
        "properties": {
          "cron": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Parsed cron expression (5-part format)",
            "title": "Cron"
          },
          "explanation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Human-readable explanation of the schedule",
            "title": "Explanation"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Error message if parsing failed",
            "title": "Error"
          }
        },
        "title": "ParseScheduleResponse",
        "type": "object"
      },
      "ParseScheduleRequest": {
        "description": "Schema for POST /api/ai-assist/parse-schedule.",
        "properties": {
          "natural_language": {
            "description": "Natural language description of the schedule (e.g., 'every day at 9am')",
            "maxLength": 500,
            "minLength": 1,
            "title": "Natural Language",
            "type": "string"
          },
          "timezone": {
            "default": "UTC",
            "description": "IANA timezone for interpreting the schedule",
            "title": "Timezone",
            "type": "string"
          }
        },
        "required": [
          "natural_language"
        ],
        "title": "ParseScheduleRequest",
        "type": "object"
      },
      "EnhancePromptResponse": {
        "description": "Response from prompt enhancement endpoint.",
        "properties": {
          "enhanced_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "AI-enhanced system prompt",
            "title": "Enhanced Prompt"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Error message if enhancement failed",
            "title": "Error"
          }
        },
        "title": "EnhancePromptResponse",
        "type": "object"
      },
      "EnhancePromptRequest": {
        "description": "Schema for POST /api/ai-assist/enhance-prompt.",
        "properties": {
          "prompt": {
            "description": "Current system prompt to enhance",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Prompt",
            "type": "string"
          },
          "agent_name": {
            "description": "Name of the agent (for context)",
            "maxLength": 100,
            "minLength": 1,
            "title": "Agent Name",
            "type": "string"
          },
          "tool_permissions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "List of optional tool names the agent can use (excludes always-available tools).",
            "title": "Tool Permissions"
          }
        },
        "required": [
          "prompt",
          "agent_name"
        ],
        "title": "EnhancePromptRequest",
        "type": "object"
      },
      "MessageCostResponse": {
        "description": "Cost breakdown for a message.",
        "properties": {
          "message_id": {
            "title": "Message Id",
            "type": "string"
          },
          "cost_usd": {
            "title": "Cost Usd",
            "type": "number"
          },
          "cost": {
            "description": "Cost in display currency",
            "title": "Cost",
            "type": "number"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "formatted": {
            "title": "Formatted",
            "type": "string"
          },
          "input_tokens": {
            "title": "Input Tokens",
            "type": "integer"
          },
          "output_tokens": {
            "title": "Output Tokens",
            "type": "integer"
          },
          "model": {
            "title": "Model",
            "type": "string"
          },
          "image_generation_cost_usd": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Generation Cost Usd"
          },
          "image_generation_cost": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Generation Cost"
          },
          "image_generation_cost_formatted": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Generation Cost Formatted"
          }
        },
        "required": [
          "message_id",
          "cost_usd",
          "cost",
          "currency",
          "formatted",
          "input_tokens",
          "output_tokens",
          "model"
        ],
        "title": "MessageCostResponse",
        "type": "object"
      },
      "SelectedCalendarsResponse": {
        "description": "Response for selected calendars.",
        "properties": {
          "calendar_ids": {
            "description": "List of selected calendar IDs",
            "items": {
              "type": "string"
            },
            "title": "Calendar Ids",
            "type": "array"
          }
        },
        "required": [
          "calendar_ids"
        ],
        "title": "SelectedCalendarsResponse",
        "type": "object"
      },
      "AgentExecutionsListResponse.AgentExecutionResponse": {
        "description": "Agent execution record.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "agent_id": {
            "title": "Agent Id",
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/AgentExecutionsListResponse.AgentStatus"
          },
          "trigger_type": {
            "$ref": "#/components/schemas/AgentExecutionsListResponse.AgentTriggerType"
          },
          "triggered_by_agent_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Triggered By Agent Id"
          },
          "started_at": {
            "title": "Started At",
            "type": "string"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Completed At"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Error Message"
          }
        },
        "required": [
          "id",
          "agent_id",
          "status",
          "trigger_type",
          "started_at"
        ],
        "title": "AgentExecutionResponse",
        "type": "object"
      },
      "AgentExecutionsListResponse.AgentStatus": {
        "description": "Status of an agent execution.",
        "enum": [
          "running",
          "completed",
          "failed",
          "waiting_approval"
        ],
        "title": "AgentStatus",
        "type": "string"
      },
      "AgentExecutionsListResponse.AgentTriggerType": {
        "description": "How an agent execution was triggered.",
        "enum": [
          "scheduled",
          "manual",
          "agent_trigger"
        ],
        "title": "AgentTriggerType",
        "type": "string"
      },
      "AgentExecutionsListResponse": {
        "description": "List of agent executions.",
        "properties": {
          "executions": {
            "items": {
              "$ref": "#/components/schemas/AgentExecutionsListResponse.AgentExecutionResponse"
            },
            "title": "Executions",
            "type": "array"
          }
        },
        "required": [
          "executions"
        ],
        "title": "AgentExecutionsListResponse",
        "type": "object"
      },
      "ConversationCostResponse": {
        "description": "Cost for a conversation.",
        "properties": {
          "conversation_id": {
            "title": "Conversation Id",
            "type": "string"
          },
          "cost_usd": {
            "title": "Cost Usd",
            "type": "number"
          },
          "cost": {
            "description": "Cost in display currency",
            "title": "Cost",
            "type": "number"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "formatted": {
            "title": "Formatted",
            "type": "string"
          }
        },
        "required": [
          "conversation_id",
          "cost_usd",
          "cost",
          "currency",
          "formatted"
        ],
        "title": "ConversationCostResponse",
        "type": "object"
      },
      "MessagesListResponse.FileMetadataResponse": {
        "description": "File metadata in message responses (excludes full data for performance).",
        "properties": {
          "name": {
            "title": "Name",
            "type": "string"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "messageId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Messageid"
          },
          "fileIndex": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Fileindex"
          }
        },
        "required": [
          "name",
          "type"
        ],
        "title": "FileMetadataResponse",
        "type": "object"
      },
      "MessagesListResponse.GeneratedImageResponse": {
        "description": "Generated image metadata.",
        "properties": {
          "prompt": {
            "title": "Prompt",
            "type": "string"
          },
          "image_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Index"
          }
        },
        "required": [
          "prompt"
        ],
        "title": "GeneratedImageResponse",
        "type": "object"
      },
      "MessagesListResponse.MessageResponse": {
        "description": "Message in a conversation.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "role": {
            "enum": [
              "user",
              "assistant"
            ],
            "title": "Role",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "files": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MessagesListResponse.FileMetadataResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Files"
          },
          "sources": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MessagesListResponse.SourceResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Sources"
          },
          "generated_images": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/MessagesListResponse.GeneratedImageResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Generated Images"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO 639-1 language code for TTS (e.g., 'en', 'cs')",
            "title": "Language"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "role",
          "content",
          "created_at"
        ],
        "title": "MessageResponse",
        "type": "object"
      },
      "MessagesListResponse.MessagesPaginationResponse": {
        "description": "Pagination info for messages list.",
        "properties": {
          "older_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cursor for fetching older messages (null if at oldest)",
            "title": "Older Cursor"
          },
          "newer_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Cursor for fetching newer messages (null if at newest)",
            "title": "Newer Cursor"
          },
          "has_older": {
            "description": "Whether there are older messages",
            "title": "Has Older",
            "type": "boolean"
          },
          "has_newer": {
            "description": "Whether there are newer messages",
            "title": "Has Newer",
            "type": "boolean"
          },
          "total_count": {
            "description": "Total number of messages in conversation",
            "title": "Total Count",
            "type": "integer"
          }
        },
        "required": [
          "has_older",
          "has_newer",
          "total_count"
        ],
        "title": "MessagesPaginationResponse",
        "type": "object"
      },
      "MessagesListResponse.SourceResponse": {
        "description": "Web search source citation.",
        "properties": {
          "title": {
            "title": "Title",
            "type": "string"
          },
          "url": {
            "title": "Url",
            "type": "string"
          }
        },
        "required": [
          "title",
          "url"
        ],
        "title": "SourceResponse",
        "type": "object"
      },
      "MessagesListResponse": {
        "description": "Paginated messages response (for dedicated messages endpoint).",
        "properties": {
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessagesListResponse.MessageResponse"
            },
            "title": "Messages",
            "type": "array"
          },
          "pagination": {
            "$ref": "#/components/schemas/MessagesListResponse.MessagesPaginationResponse"
          }
        },
        "required": [
          "messages",
          "pagination"
        ],
        "title": "MessagesListResponse",
        "type": "object"
      },
      "ChatBatchResponse.FileMetadataResponse": {
        "description": "File metadata in message responses (excludes full data for performance).",
        "properties": {
          "name": {
            "title": "Name",
            "type": "string"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "messageId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Messageid"
          },
          "fileIndex": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Fileindex"
          }
        },
        "required": [
          "name",
          "type"
        ],
        "title": "FileMetadataResponse",
        "type": "object"
      },
      "ChatBatchResponse.GeneratedImageResponse": {
        "description": "Generated image metadata.",
        "properties": {
          "prompt": {
            "title": "Prompt",
            "type": "string"
          },
          "image_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Image Index"
          }
        },
        "required": [
          "prompt"
        ],
        "title": "GeneratedImageResponse",
        "type": "object"
      },
      "ChatBatchResponse.SourceResponse": {
        "description": "Web search source citation.",
        "properties": {
          "title": {
            "title": "Title",
            "type": "string"
          },
          "url": {
            "title": "Url",
            "type": "string"
          }
        },
        "required": [
          "title",
          "url"
        ],
        "title": "SourceResponse",
        "type": "object"
      },
      "ChatBatchResponse": {
        "description": "Response from batch chat endpoint.",
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "role": {
            "const": "assistant",
            "default": "assistant",
            "title": "Role",
            "type": "string"
          },
          "content": {
            "title": "Content",
            "type": "string"
          },
          "files": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ChatBatchResponse.FileMetadataResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Files"
          },
          "sources": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ChatBatchResponse.SourceResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Sources"
          },
          "generated_images": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ChatBatchResponse.GeneratedImageResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Generated Images"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "ISO 639-1 language code for TTS (e.g., 'en', 'cs')",
            "title": "Language"
          },
          "created_at": {
            "title": "Created At",
            "type": "string"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Auto-generated conversation title (first message only)",
            "title": "Title"
          },
          "user_message_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Real ID of the user message (for updating temp IDs in frontend)",
            "title": "User Message Id"
          }
        },
        "required": [
          "id",
          "content",
          "created_at"
        ],
        "title": "ChatBatchResponse",
        "type": "object"
      },
      "AgentConversationSyncResponse.AgentConversationSyncData": {
        "description": "Sync data for an agent's conversation.",
        "properties": {
          "message_count": {
            "description": "Total number of messages in conversation",
            "title": "Message Count",
            "type": "integer"
          },
          "updated_at": {
            "description": "Conversation updated_at timestamp in ISO format",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "message_count",
          "updated_at"
        ],
        "title": "AgentConversationSyncData",
        "type": "object"
      },
      "AgentConversationSyncResponse": {
        "description": "Response from agent conversation sync endpoint for real-time synchronization.",
        "properties": {
          "conversation": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AgentConversationSyncResponse.AgentConversationSyncData"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Agent conversation state, or null if no conversation exists"
          },
          "server_time": {
            "description": "Server timestamp in ISO format",
            "title": "Server Time",
            "type": "string"
          }
        },
        "required": [
          "server_time"
        ],
        "title": "AgentConversationSyncResponse",
        "type": "object"
      }
    }
  }
}